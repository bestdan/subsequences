{% extends "base.html" %}

{% block content %}
<div class="game-container">
    <h2 class="mb-4">Game #{{ game.id }}</h2>
    
    <div id="gameStatus" class="alert alert-info">
        Waiting for players... ({{ game.players|length }}/6)
    </div>
    
    <div id="playersList" class="mb-4">
        <h4>Players:</h4>
        <ul class="list-group">
            {% for player in game.players %}
            <li class="list-group-item">{{ player.username }}</li>
            {% endfor %}
        </ul>
    </div>
    
    <div id="gameArea" class="mb-4" style="display: none;">
        <div id="lastWords" class="alert alert-secondary"></div>
        
        <div class="mb-3">
            <label for="sentence" class="form-label">Your sentence:</label>
            <textarea id="sentence" class="form-control" rows="3"></textarea>
        </div>
        
        <button id="submitSentence" class="btn btn-primary">Submit Sentence</button>
    </div>
    
    <div id="gameComplete" style="display: none;">
        <h3>Story Complete!</h3>
        <div id="finalStory"></div>
        <button onclick="location.href='{{ url_for('game_routes.index') }}'" class="btn btn-primary mt-3">
            Start New Game
        </button>
    </div>
</div>

<div class="mt-4">
    <h4>Share this game:</h4>
    <input type="text" class="form-control" readonly value="{{ request.url }}" 
           onclick="this.select(); document.execCommand('copy');">
</div>
{% endblock %}

{% block scripts %}
<script>
    const GAME_ID = {{ game.id }};
</script>
<script src="{{ url_for('static', filename='js/game.js') }}"></script>
{% endblock %}
